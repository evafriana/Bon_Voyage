<div class="container my-5">
<!-- Bannière avec le username et modification du profil -->
	<div class="profil d-flex align-items-center">
		<div class="row align-items-center">

		<!-- Image à changer -->

			<%if @user.avatar.attached?%>
				<%= image_tag @user.avatar, alt: 'avatar', class: "rounded-circle col-2"  %>
			<%else%>
				<img class="rounded-circle col-2" alt="Avatar" src="https://secureimg.stitcher.com/feedimagesplain328/190254.jpg" id="avatar">
			<%end%>

			<div class= "col-2 align-items-center">

				<!-- Si pas de username, on affiche son email -->
				<% if @user.user_name %>
					<h2 class="textname"><%= @user.user_name %></h2>

				<!-- formulaire pour ajouter son nom -->
				<% if current_user! && @user.user_name == '' %>
					<%= render 'form' %>
				<% end %>

				<!-- formulaire pour modifier son nom -->
				<% if current_user! && @user.user_name != ''%>
					<a onclick="openForm()"><i class="fas fa-pencil-alt mr-5"></i></a>

						<div class="form-popup" id="myForm">
							<%= form_for @user do |form| %>
								<div class="form-group mb-2">
									<%= form.text_field :user_name, class: 'form-control' %>
								</div>
								<%= form.submit 'Enregistrer', class: 'btn btn-primary btn-sm' %>
								<button class="btn btn-primary btn-sm" onclick="closeForm()">Retour</button>
							<% end %>
						</div>

				<% end %>

				<% else %>
					<!-- formulaire pour ajouter son nom -->
					<% if current_user! %>
						<%= render 'form' %>
					<% end %>
				<% end %>

			</div>

		<!-- Lien vers éditer mon profil -->
			<% if current_user! %>
				<div class="col-4 ml-auto">
					<%= link_to 'Editer mon profil',edit_user_registration_path , class:'btn btn-primary textname2 ' %>
				</div>
			<% end %>
		</div>
	</div>
</div>

<div class="container">
	<%= form_tag user_avatars_path(@user), class: "mt-2 textname2", multipart: true do %>
		<%= file_field_tag :avatar %>
		<p class="mt-2 textname2"><%= submit_tag "mettre à jour" %></p>
	<% end %>
	<hr>
</div>

<div class="container my-5 mb-5">
	<div class="row row-cols-1 row-cols-md-2">
	  <div class="col mb-4">
	    <div class="card-body">
				<h3 class=" mb-5 text-center">Mon voyage à venir</h3>
					<% if @user.upcoming_trip %>
						<%= render @user.upcoming_trip %>
					<% else %>
						<p>Pas de voyage prévu pour le moment</p>
					<% end %>
	    </div>
	  </div>
	  <div class="col mb-4">
	    <div class="card-body">
	      <h3 class=" mb-5 text-center">Mes anciens voyages</h3>
					<% if @user.previous_trips %>
						<%= render @user.previous_trips %>
					<% else %>
						<p>Pas de voyages déjà passés pour le moment</p>
					<% end %>
	    </div>
	  </div>
	</div>
</div>